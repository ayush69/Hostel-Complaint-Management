const dotenv = require('dotenv'); dotenv.config(); const connectDB = require('./db'); const Admin = require('../models/Admin'); const { hashPassword } = require('./hash');
(async ()=>{ await connectDB(); const exists = await Admin.findOne({ email: process.env.SEED_ADMIN_EMAIL || 'admin@hcm.local' }); if (exists) { console.log('Admin exists'); process.exit(0); } const pwd = process.env.SEED_ADMIN_PASSWORD || 'password123'; const hashed = await hashPassword(pwd); const a = await Admin.create({ name:'Admin', email: process.env.SEED_ADMIN_EMAIL || 'admin@hcm.local', password: hashed, role:'Warden' }); console.log('Created admin', a.email, 'pwd', pwd); process.exit(0); })();
